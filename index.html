<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Websocket</title>
</head>
<body>
    <h1>Echo Test</h1>
    <input id="sendTxt" type="text" />
    <button id="sendBtn">send</button>
    <div id="recv"></div>
    <script>
        let log = console.log.bind(console)

        let websocket = new WebSocket('ws://localhost:3000')
        websocket.onopen = function() {
            log('websocket open')
            document.getElementById('recv').innerHTML = 'Connected'
        }
        websocket.onclose = function() {
            log('websocket close')
        }
        websocket.onmessage = function(e){
            log(e.data)
            document.getElementById('recv').innerHTML = e.data
        }
        document.getElementById('sendBtn').onclick = function() {
            let txt = document.getElementById('sendTxt').value
            websocket.send(txt)
        }
    </script>
</body>
</html>